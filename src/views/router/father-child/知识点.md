# 父子路由传递

### props 和\$emit

- 父子传递
- props

```
props: {
    // 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)
    propA: Number,
    // 多个可能的类型
    propB: [String, Number],
    // 必填的字符串
    propC: {
      type: String,
      required: true
    },
    // 带有默认值的数字
    propD: {
      type: Number,
      default: 100
    },
    // 带有默认值的对象
    propE: {
      type: Object,
      // 对象或数组默认值必须从一个工厂函数获取
      default: function () {
        return { message: 'hello' }
      }
    },
    // 自定义验证函数
    propF: {
      validator: function (value) {
        // 这个值必须匹配下列字符串中的一个
        return ['success', 'warning', 'danger'].indexOf(value) !== -1
      }
    }
  }
```

- emit 子方法 emit 发送，父方法接收

```
父
<child @emitSend="emitFather"></child>

methods: {
  emitFather (val) {
    alert(val)
  }
}

子
<el-button type="primary" size="default" @click="emitChild()">emit</el-button>

methods:{
  emitChild () {
    this.$emit('emitSend', '我是emit')
  }
}
```

- 工厂函数

```
function person(firstName, lastName, age) {
  const person = {};
  person.firstName = firstName;
  person.lastName = lastName;
  person.age = age;
  return person;
}
```

- 构造函数

```
function Person(firstName, lastName, age) {
  this.firstName = firstName;
  this.lastName = lastName;
  this.age = age;
}
```

---

### ref 和\$parent

- 父子传递

---

### EventBus

- 父子，兄弟，隔代传递
- 方式一（main 函数声明）

```
初始化
//main.js
Vue.prototype.$EventBus = new Vue();

触发
this.$EventBus.$emit('eventName', param1,param2,...)

监听
this.$EventBus.$on('eventName', (param1,param2,...)=>{
    //需要执行的代码
})

移除
this.$EventBus.$off('eventName');
```

- 方法二（创建 js 文件形式）

```
初始化
window.eventBus = new Vue();

触发
EventBus.$emit('eventName', param1,param2,...)

监听
EventBus.$on('eventName', (param1,param2,...)=>{
//需要执行的代码
})

移除
EventBus.$off('eventName');
```

---

### provide/inject

- 父子，兄弟，隔代传递。开发程序是很少用，在开发库的时候用的多，多用于开发高阶组件库。

---
